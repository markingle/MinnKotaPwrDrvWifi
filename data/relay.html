<!doctype html>
<html>

<head>
    <meta charset="utf-8" />
    <title>Counter</title>
    <meta name="viewport" content="width=device-width">
    <style type="text/css">
	
	#centerapp { 
		width: 900px; 
		margin: 0 auto; 
	}
	
    .container {
        width: 450px;
        margin: 0 auto;
        text-align: center;
    }

    .gauge {
        width: 450px;
        height: 450px;
    }
	
	button {
		position: relative;
		background-color: #4CAF50;
		border: none;
		font-size: 28px;
		color: #FFFF00;
		padding: 20px;
		width: 200px;
		-webkit-user-select: none;
		vertical-align: middle;
		text-align: center;
		text-decoration: none;
		overflow: hidden;
		cursor: pointer;
	}
	
	
    </style>
</head>

<body>
	<div id="centerapp" ><b>PowerDriver Protoype Test App</b></div>
	<label for="points">SPEED CONTROL</label>
	<input type="range" name="speed_name" id="speed_id" value="0" min="0" max="255" onchange="connection.send(this.value)">
	<button id="C" class="button" type="button">Constant On</button> 
	<button id="I" class="button" type="button">ON/OFF</button>
	<button id="M" class="button" type="button">Momentary</button>
	<button id="L" class="button" type="button">Left Turn</button>
	<button id="R" class="button" type="button">Right Turn</button>
	<button id="T" class="button" type="button">Test Comms</button>
	
	</div>
	<script src="jquery-1.12.3.min.js"></script>
	<script>
		touchStart1 = function(e) {
		console.log("#CD");
		connection.send("#CD");
		}
		
		touchEnd1 = function(e) {
		console.log("#CU");
		connection.send("#CU");
		}
		
		touchStart2 = function(e) {
		console.log("#ID");
		connection.send("#ID");
		}
		
		touchEnd2 = function(e) {
		console.log("#IU");
		connection.send("#IU");
		}

		//function throttle(e) {
		//console.log("Throttle Value Input via slider: " + e.value);
		//console.log("Throttle id Input via slider: " + e.id);
		//}

		function addListeners(){
		
		document.getElementById('C').addEventListener("touchstart", touchStart1);
		document.getElementById('C').addEventListener("touchend", touchEnd1);
		document.getElementById('I').addEventListener("touchstart", touchStart2);
		document.getElementById('I').addEventListener("touchend", touchEnd2);
		document.getElementById('M').addEventListener("touchstart", touchStart2);
		document.getElementById('M').addEventListener("touchend", touchEnd2);
		document.getElementById('L').addEventListener("touchstart", touchStart1);
		document.getElementById('L').addEventListener("touchend", touchEnd1);
		document.getElementById('R').addEventListener("touchstart", touchStart2);
		document.getElementById('R').addEventListener("touchend", touchEnd2);
		document.getElementById('T').addEventListener("touchstart", touchStart1);
		document.getElementById('T').addEventListener("touchend", touchEnd1);
		//document.getElementById('speed_id').addEventListener("change", throttle);

		
			
			}
window.addEventListener("load", addListeners); 

		function mouseDown(e) {
		console.log("Down " + e.id);
		connection.send("#" + e.id + "D");
		}
		
		function mouseUp(e) {
		console.log("Up " + e.id);
		connection.send("#" + e.id + "U");
		}
		
	</script>
    <script type="text/javascript">
	
	var connection = new WebSocket('ws://'+location.hostname+':81/', ['arduino']);
		connection.onopen = function () {  connection.send('Relay'); };
		console.log("temp connection opened");
		connection.onerror = function (error) { console.log('WebSocket Error ', error); };
	
	function buttonclick(e) {
			connection.send("#" + e.id);
	}
    </script>
</body>

</html>
