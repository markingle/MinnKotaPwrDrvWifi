<!doctype html>
<html>

<head>
    <meta charset="utf-8" />
    <title>Counter</title>
    <meta name="viewport" content="width=device-width">
    <style type="text/css">
	
	#centerapp { 
		width: 900px; 
		margin: 0 auto; 
	}
	
    .container {
        width: 450px;
        margin: 0 auto;
        text-align: center;
    }

    .gauge {
        width: 450px;
        height: 450px;
    }
	
	button {
		position: relative;
		background-color: #4CAF50;
		border: none;
		font-size: 28px;
		color: #FFFF00;
		padding: 20px;
		width: 200px;
		-webkit-user-select: none;
		vertical-align: middle;
		text-align: center;
		text-decoration: none;
		overflow: hidden;
		cursor: pointer;
	}
	
	
    </style>
</head>

<body>
	<div id="centerapp" ><b>PowerDriver Protoype Test App</b></div>
	<div>
	
	<button id="I" class="button" type="button">ON/OFF</button>
	<button id="M" class="button" type="button">Momentary</button>
	<button id="L" class="button" type="button">Left Turn</button>
	<button id="R" class="button" type="button">Right Turn</button>
	<button id="T" class="button" type="button">Test Comms</button>
	</div>
	<div>
	<label for="points">SPEED CONTROL</label>
	<input type="range" orient="vertical" style="-webkit-appearance: slider-vertical;" name="speed_name" id="speed_id" value="0" min="0" max="1023" onchange="connection.send(this.value)">
	</div>
	<script src="jquery-1.12.3.min.js"></script>
	<script>
		//touchStartC= function(e) {
		//console.log("#CD");
		//connection.send("#CD");
		//}
		
		//touchEndC = function(e) {
		//console.log("#CU");
		//connection.send("#CU");
		//}
		
		touchStartI = function(e) {
		console.log("#ID");
		connection.send("#ID");
		}
		
		touchEndI = function(e) {
		console.log("#IU");
		connection.send("#IU");
		}

		touchStartM = function(e) {
		console.log("#MD");
		connection.send("#MD");
		}
		
		touchEndM = function(e) {
		console.log("#MU");
		connection.send("#MU");
		}

		touchStartL = function(e) {
		console.log("#LD");
		connection.send("#LD");
		}
		
		touchEndL = function(e) {
		console.log("#LU");
		connection.send("#LU");
		}

		touchStartR = function(e) {
		console.log("#RD");
		connection.send("#RD");
		}
		
		touchEndR = function(e) {
		console.log("#RU");
		connection.send("#RU");
		}

		function addListeners()
		{
		
			//document.getElementById('C').addEventListener("touchstart", touchStartC);
			//document.getElementById('C').addEventListener("touchend", touchEndC);

			document.getElementById('I').addEventListener("touchstart", touchStartI);
			document.getElementById('I').addEventListener("touchend", touchEndI);

			document.getElementById('M').addEventListener("touchstart", touchStartM);
			document.getElementById('M').addEventListener("touchend", touchEndM);

			document.getElementById('L').addEventListener("touchstart", touchStartL);
			document.getElementById('L').addEventListener("touchend", touchEndL);

			document.getElementById('R').addEventListener("touchstart", touchStartR);
			document.getElementById('R').addEventListener("touchend", touchEndR);

			//document.getElementById('T').addEventListener("touchstart", touchStart1);
			//document.getElementById('T').addEventListener("touchend", touchEnd1);

			//document.getElementById('speed_id').addEventListener("change", throttle);	
		}

window.addEventListener("load", addListeners); 

		function mouseDown(e) {
		console.log("Down " + e.id);
		connection.send("#" + e.id + "D");
		}
		
		function mouseUp(e) {
		console.log("Up " + e.id);
		connection.send("#" + e.id + "U");
		}
		
	</script>
    <script type="text/javascript">
	
	var connection = new WebSocket('ws://'+location.hostname+':81/', ['arduino']);
		connection.onopen = function () {  connection.send('Init Conn'); };
		console.log("temp connection opened");
		connection.onerror = function (error) { console.log('WebSocket Error ', error); };
	
	//function buttonclick(e) {
			//connection.send("#" + e.id);
	//}
    </script>
</body>

</html>
